@{
    ViewData["Title"] = "Simple Barcode Test";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">Simple Barcode Test</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Test API Calls</h5>
                            <button class="btn btn-primary mb-2" onclick="testGetProducts()">Test Get Products</button>
                            <button class="btn btn-info mb-2" onclick="testSearchProducts()">Test Search Products</button>
                            <button class="btn btn-success mb-2" onclick="testGetProductById()">Test Get Product By ID</button>
                            
                            <div id="apiResults" class="mt-3">
                                <h6>API Results:</h6>
                                <pre id="resultsDisplay" style="background: #f8f9fa; padding: 10px; border-radius: 5px; max-height: 300px; overflow-y: auto;"></pre>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <h5>Test Data</h5>
                            <div class="form-group">
                                <label for="testProductId">Test Product ID:</label>
                                <input type="number" id="testProductId" class="form-control" value="1" />
                            </div>
                            <div class="form-group">
                                <label for="testSearchTerm">Test Search Term:</label>
                                <input type="text" id="testSearchTerm" class="form-control" value="test" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function testGetProducts() {
        console.log('Testing GetProductsForBarcode API...');
        $.ajax({
            url: '/Admin/Products/GetProductsForBarcode',
            type: 'GET',
            success: function(response) {
                console.log('GetProductsForBarcode success:', response);
                displayResults('GetProductsForBarcode', response);
            },
            error: function(xhr, status, error) {
                console.error('GetProductsForBarcode error:', xhr, status, error);
                displayResults('GetProductsForBarcode Error', { error: error, status: status, response: xhr.responseText });
            }
        });
    }
    
    function testSearchProducts() {
        const searchTerm = $('#testSearchTerm').val();
        console.log('Testing SearchProductsForBarcode API with term:', searchTerm);
        $.ajax({
            url: '/Admin/Products/SearchProductsForBarcode',
            type: 'GET',
            data: { searchTerm: searchTerm },
            success: function(response) {
                console.log('SearchProductsForBarcode success:', response);
                displayResults('SearchProductsForBarcode', response);
            },
            error: function(xhr, status, error) {
                console.error('SearchProductsForBarcode error:', xhr, status, error);
                displayResults('SearchProductsForBarcode Error', { error: error, status: status, response: xhr.responseText });
            }
        });
    }
    
    function testGetProductById() {
        const productId = $('#testProductId').val();
        console.log('Testing GetProductById API with ID:', productId);
        $.ajax({
            url: '/Admin/Products/GetProductById',
            type: 'GET',
            data: { productId: productId },
            success: function(response) {
                console.log('GetProductById success:', response);
                displayResults('GetProductById', response);
            },
            error: function(xhr, status, error) {
                console.error('GetProductById error:', xhr, status, error);
                displayResults('GetProductById Error', { error: error, status: status, response: xhr.responseText });
            }
        });
    }
    
    function displayResults(title, data) {
        const display = $('#resultsDisplay');
        const timestamp = new Date().toLocaleTimeString();
        const result = `[${timestamp}] ${title}:\n${JSON.stringify(data, null, 2)}\n\n`;
        
        display.append(result);
        display.scrollTop(display[0].scrollHeight);
    }
    
    function clearResults() {
        $('#resultsDisplay').empty();
    }
    
    $(document).ready(function() {
        $('#apiResults').prepend('<button class="btn btn-warning btn-sm" onclick="clearResults()">Clear Results</button>');
    });
</script>
